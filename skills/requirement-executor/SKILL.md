---
name: requirement-executor
description: 需求驅動的自動化任務執行系統。當用戶要求執行基於需求文件的任務流程時使用此 Skill。適用場景：(1) 讀取 requirement 目錄中的需求文件，(2) 自動分析並產生任務清單，(3) 逐一執行任務，(4) 驗證任務完成度，(5) 產生最終總結報告，(6) 需求文件與執行記錄歸檔。此 Skill 實現完整的需求分析 → 規劃 → 執行 → 驗證 → 總結 → 歸檔工作流程。
license: MIT
---

# Requirement Executor Skill

完整的需求驅動任務執行工作流程，從需求分析到任務完成驗證。

## 核心工作流程

此 Skill 實現以下六階段工作流程：

```
需求讀取 → 任務規劃 → 任務執行 → 完成驗證 → 總結報告 → 工作歸檔
```

### 階段 1: 需求分析 (Requirement Analysis)

**目標**：讀取並理解所有需求文件

**執行步驟**：

1. 檢查 `workspace/requirement/` 目錄是否存在
   - 如不存在，創建目錄並告知用戶放置需求文件
   
2. 讀取所有需求文件
   ```bash
   find workspace/requirement/ -type f \( -name "*.md" -o -name "*.txt" -o -name "*.doc*" \)
   ```

3. 分析每個需求文件：
   - 提取核心需求
   - 識別依賴關係
   - 評估複雜度
   - 確定優先級

4. 創建需求清單文檔
   ```bash
   # 在 workspace/plan/ 目錄創建
   workspace/plan/00_requirement_summary.md
   ```

**輸出格式**：
```markdown
# 需求總覽

## 需求來源
- requirement/req1.md
- requirement/req2.txt

## 需求清單
### REQ-001: [需求名稱]
- **來源**: requirement/req1.md
- **優先級**: High/Medium/Low
- **複雜度**: Complex/Medium/Simple
- **依賴**: REQ-002
- **描述**: [詳細描述]

### REQ-002: [需求名稱]
...
```

### 階段 2: 任務規劃 (Task Planning)

**目標**：將需求分解為可執行的任務清單

**執行步驟**：

1. 創建 `workspace/task/` 目錄（如不存在）

2. 為每個需求創建任務分解：
   - 識別實現步驟
   - 確定任務順序
   - 定義驗收標準
   - 估算執行時間

3. 產生編號的任務文件：
   ```
   task/01_task_[簡短描述].md
   task/02_task_[簡短描述].md
   task/03_task_[簡短描述].md
   ```

**任務文件模板**：
```markdown
# Task-[編號]: [任務標題]

## 對應需求
- REQ-001: [需求名稱]

## 任務目標
[明確描述此任務要達成什麼]

## 執行步驟
1. [步驟 1]
2. [步驟 2]
3. [步驟 3]

## 驗收標準
- [ ] 標準 1
- [ ] 標準 2
- [ ] 標準 3

## 預期輸出
- 文件: [路徑]
- 結果: [描述]

## 依賴任務
- Task-[編號]: [原因]

## 狀態
- [ ] 未開始
- [ ] 進行中
- [ ] 已完成
- [ ] 需要修正

## 執行記錄
[執行時填寫]
```

4. 產生總任務清單：
   ```
   workspace/task/00_task_manifest.md
   ```

**任務清單格式**：
```markdown
# 任務執行清單

## 任務總覽
- 總任務數: X
- 預估總時間: Y 小時

## 執行順序
1. Task-01: [標題] - 對應 REQ-001
2. Task-02: [標題] - 對應 REQ-002
3. Task-03: [標題] - 對應 REQ-001, REQ-003

## 依賴關係圖
```
Task-01
  └─> Task-03
Task-02
  └─> Task-03
```

## 風險評估
- [識別的風險]
```

### 階段 3: 任務執行 (Task Execution)

**目標**：按順序執行所有規劃的任務

**執行原則**：

1. **順序執行**：按照任務編號順序執行
2. **依賴檢查**：執行前確認依賴任務已完成
3. **狀態更新**：每個任務完成後更新狀態
4. **錯誤處理**：遇到錯誤時記錄並決定是否繼續

**執行流程**：

```python
for task_file in sorted(task_files):
    1. 讀取任務文件
    2. 檢查依賴任務狀態
    3. 更新狀態為「進行中」
    4. 執行任務步驟
    5. 記錄執行結果
    6. 更新狀態為「已完成」或「需要修正」
    7. 繼續下一個任務
```

**執行記錄格式**：
在每個任務文件的「執行記錄」區段添加：

```markdown
## 執行記錄

### 執行時間
- 開始: YYYY-MM-DD HH:MM:SS
- 結束: YYYY-MM-DD HH:MM:SS
- 耗時: X 分鐘

### 執行結果
- 狀態: 成功/失敗/部分完成
- 輸出文件: [路徑列表]
- 遇到的問題: [描述]
- 解決方案: [描述]

### 驗收標準檢查
- [x] 標準 1 - 通過
- [x] 標準 2 - 通過
- [ ] 標準 3 - 未通過，原因：[說明]
```

### 階段 4: 完成驗證 (Verification)

**目標**：逐一檢視所有任務是否符合要求

**驗證流程**：

1. **重新讀取所有任務文件**
   - 按順序檢查每個 task/*.md
   
2. **驗證項目**：
   - 任務狀態是否為「已完成」
   - 驗收標準是否全部通過
   - 預期輸出是否存在
   - 輸出內容是否符合需求

3. **交叉驗證**：
   - 回溯需求文件，確認每個需求都有對應的已完成任務
   - 檢查任務之間的一致性
   - 驗證依賴關係是否正確處理

4. **產生驗證報告**：
   ```
   workspace/task/99_verification_report.md
   ```

**驗證報告格式**：
```markdown
# 任務驗證報告

## 驗證時間
YYYY-MM-DD HH:MM:SS

## 任務完成統計
- 總任務數: X
- 已完成: Y
- 部分完成: Z
- 失敗: W
- 完成率: XX%

## 需求覆蓋檢查
### REQ-001: [需求名稱]
- 對應任務: Task-01, Task-03
- 完成狀態: ✓ 已完成
- 驗證結果: 通過

### REQ-002: [需求名稱]
- 對應任務: Task-02
- 完成狀態: ⚠ 部分完成
- 驗證結果: 需要修正
- 問題: [描述]

## 詳細驗證結果

### Task-01: [標題]
- 狀態: ✓ 已完成
- 驗收標準: 3/3 通過
- 輸出檔案: 已確認存在
- 品質評估: 符合要求

### Task-02: [標題]
- 狀態: ⚠ 部分完成
- 驗收標準: 2/3 通過
- 問題: [詳細描述]
- 建議: [改進建議]

## 發現的問題
1. [問題描述]
   - 影響範圍: Task-XX
   - 嚴重程度: High/Medium/Low
   - 建議處理: [描述]

## 需要修正的任務
- Task-XX: [原因]

## 整體評估
- 整體品質: 優秀/良好/需改進
- 是否達成所有需求: 是/否
- 後續建議: [描述]
```

### 階段 5: 總結報告 (Final Report)

**目標**：產生完整的執行總結和成果報告

**報告內容**：

1. 創建最終報告文件：
   ```
   workspace/report/final_report.md
   workspace/report/execution_summary.md
   ```

2. 整理所有產出文件到 `workspace/report/` 目錄

**最終報告格式**：
```markdown
# 需求執行最終報告

## 執行總覽

### 專案資訊
- 執行時間: YYYY-MM-DD HH:MM:SS ~ YYYY-MM-DD HH:MM:SS
- 總執行時長: X 小時 Y 分鐘
- 處理的需求數量: X
- 產生的任務數量: Y

### 需求完成狀態

#### 已完成需求 (X/Y)
- ✓ REQ-001: [需求名稱]
- ✓ REQ-002: [需求名稱]

#### 未完成需求 (X/Y)
- ✗ REQ-003: [需求名稱] - 原因：[說明]

### 任務執行統計
- 成功完成: X 個
- 部分完成: Y 個
- 失敗: Z 個
- 跳過: W 個

## 需求達成確認

### REQ-001: [需求名稱]
- **狀態**: ✓ 已達成
- **實現方式**: 
  - Task-01: [描述]
  - Task-03: [描述]
- **驗證結果**: 所有驗收標準通過
- **產出物**:
  - [文件列表]

### REQ-002: [需求名稱]
- **狀態**: ✓ 已達成
- **實現方式**:
  - Task-02: [描述]
- **驗證結果**: 所有驗收標準通過
- **產出物**:
  - [文件列表]

## 產出物清單

### 文檔
- requirement/: 原始需求文件
- task/: 任務規劃和執行記錄
- result/: 最終成果

### 程式碼/腳本
- [列出產生的程式碼文件]

### 配置文件
- [列出產生的配置文件]

### 其他產出
- [列出其他產出物]

## 執行過程亮點
1. [成功的地方]
2. [高效的實踐]
3. [創新的解決方案]

## 遇到的挑戰與解決
1. **挑戰**: [描述]
   - **解決方案**: [描述]
   - **學習**: [描述]

## 品質評估
- **整體品質**: ⭐⭐⭐⭐⭐ (5/5)
- **需求符合度**: XX%
- **代碼品質**: 優秀/良好/可接受
- **文檔完整性**: 完整/基本完整/需補充

## 後續建議
1. [建議 1]
2. [建議 2]
3. [建議 3]

## 結論
[整體總結，確認所有需求是否完成]

---
**報告產生時間**: YYYY-MM-DD HH:MM:SS
**執行者**: Claude Requirement Executor
```

### 階段 6: 需求與執行記錄歸檔 (Archive)

**目標**：將本次執行的需求文件與相關執行記錄搬移至歷史記錄區中

**執行步驟**：

1. 創建 `workspace/history/YYYYMMDD/hhmm` 目錄（如不存在），YYYYMMDD為本日日期，hhmm則為當下時間
2. 將 `workspace/requirement`，`workspace/plan`，`workspace/task`，`workspace/report`等目錄下檔案搬入先一步建立的history目錄中，並確認移除已搬運完成的檔案

## task執行期間目錄結構

task執行期間的標準目錄結構：

```
project/workspace/
├── requirement/          # 原始需求文件（用戶提供）
│   ├── req1.md
│   ├── req2.txt
│   └── ...
├── plan/                 # 任務規劃
│   ├── 00_requirement_summary.md
├── task/                 # 執行記錄
│   ├── 00_task_manifest.md
│   ├── 01_task_xxx.md
│   ├── 02_task_xxx.md
│   ├── ...
│   └── 99_verification_report.md
└── report/              # 最終產出
    ├── final_report.md
    ├── execution_summary.md
    └── [其他產出文件]
```

## 歸檔完成目錄結構

歸檔完成的標準目錄結構：

```
project/workspace/history/YYYYMMDD/hhmm/ #YYYYMMDD為本日日期，hhmm則為當下時間
├── requirement/          # 原始需求文件（用戶提供）
│   ├── req1.md
│   ├── req2.txt
│   └── ...
├── plan/                 # 任務規劃
│   ├── 00_requirement_summary.md
├── task/                 # 執行記錄
│   ├── 00_task_manifest.md
│   ├── 01_task_xxx.md
│   ├── 02_task_xxx.md
│   ├── ...
│   └── 99_verification_report.md
└── report/              # 最終產出
    ├── final_report.md
    ├── execution_summary.md
    └── [其他產出文件]
```

## 執行命令範例

使用此 Skill 時，可以這樣觸發：

```
「請執行 requirement 目錄下的所有需求」
「分析並執行需求文件中的任務」
「讀取需求，產生任務清單並執行」
```

## 關鍵原則

1. **追蹤性 (Traceability)**
   - 每個任務都能追溯到需求
   - 每個需求都能找到實現任務

2. **可驗證性 (Verifiability)**
   - 明確的驗收標準
   - 客觀的驗證方法

3. **透明性 (Transparency)**
   - 詳細的執行記錄
   - 完整的狀態更新

4. **完整性 (Completeness)**
   - 確保所有需求都被處理
   - 最終報告涵蓋所有面向

## 錯誤處理

### 常見錯誤情境

1. **需求文件不存在**
   - 創建 requirement/ 目錄
   - 提示用戶放置需求文件

2. **任務執行失敗**
   - 記錄錯誤詳情
   - 標記任務狀態
   - 評估是否影響後續任務
   - 在最終報告中說明

3. **依賴任務未完成**
   - 檢查依賴狀態
   - 等待或跳過
   - 記錄跳過原因

4. **驗證不通過**
   - 詳細記錄不通過項目
   - 提供改進建議
   - 在最終報告中標註

## 使用此 Skill 的最佳實踐

1. **需求文件準備**
   - 使用清晰的結構
   - 包含明確的驗收標準
   - 標註優先級和依賴

2. **執行監控**
   - 定期檢查任務狀態
   - 及時處理錯誤
   - 保持記錄完整

3. **驗證嚴謹**
   - 不跳過驗證步驟
   - 交叉驗證需求和任務
   - 確保品質標準

4. **文檔維護**
   - 保持文檔結構清晰
   - 及時更新狀態
   - 記錄重要決策

## 進階功能

### 並行任務支持

對於沒有依賴關係的任務，可以識別並標註可並行執行：

```markdown
## 可並行執行的任務組
- Group 1: Task-02, Task-04, Task-05
- Group 2: Task-07, Task-08
```

### 里程碑追蹤

在任務清單中設置里程碑：

```markdown
## 里程碑
- Milestone 1: 基礎功能完成 (Task-01 ~ Task-05)
- Milestone 2: 核心功能完成 (Task-06 ~ Task-10)
- Milestone 3: 全部功能完成 (Task-11 ~ Task-15)
```

### 風險管理

在任務規劃階段識別風險：

```markdown
## 風險清單
- Risk-01: [描述] - 影響 Task-XX - 緩解措施: [描述]
```

## 參考文件

詳細的實作範例和模板請參考：
- `references/task-template.md` - 任務文件詳細模板
- `references/report-examples.md` - 各類報告範例

---

此 Skill 確保需求驅動的開發流程系統化、可追蹤、可驗證，最終產生完整的執行報告。
